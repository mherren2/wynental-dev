(()=>{const t=function(){if(this.modalCloseBtns=[...this.wrapper.querySelectorAll(this.opts.modalCloseSelector)],-1!==this.opts.closeMethods.indexOf("button")&&!this.opts.dynamicClose&&this.modalHeader&&(this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.classList.add("s-btn--reset","s-close__btn","s-modal__close"),this.modalCloseBtn.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" preserveAspectRatio="none"><path d="M24,2.4L21.6,0L12,9.6L2.4,0L0,2.4L9.6,12L0,21.6L2.4,24l9.6-9.6l9.6,9.6l2.4-2.4L14.4,12L24,2.4z"></path></svg>',this.modalHeader.append(this.modalCloseBtn),this.modalCloseBtns.push(this.modalCloseBtn)),this.opts.showOnScroll&&this.canOpen){const t=function(){const t=document.createElement("div");return t.style.position="absolute",t.style[this.opts.scrollDirection]=`${this.opts.scrollPosition}px`,t.style.height="1px",t.style.zIndex=-9999,t}.call(this,this.opts.scrollDirection,this.opts.scrollPosition);document.body.append(t),new IntersectionObserver(function(t,e){const{scrollDirection:s}=this.opts;t.forEach(t=>{(!t.isIntersecting&&"top"===s||t.isIntersecting&&"bottom"===s)&&(this.open(),"none"!==this.opts.storage&&e.unobserve(t.target))})}.bind(this)).observe(t)}if("platform"===this._env&&this.opts.enablePlaceholder){const t=document.createElement("div");t.classList.add("s-modal__placeholder"),t.innerText="SiteManager Modal Placeholder",this.wrapper.parentElement.appendChild(t)}},e=function(t){this._overlayDownTarget=t.target},s=function(t){-1!==this.opts.closeMethods.indexOf("overlay")&&t.target===this.overlay&&this.overlay===this._overlayDownTarget&&2!==t.button&&this.close(),this._overlayDownTarget=null},o=function(t){const e=t.target.closest(this.opts.modalTriggerSelector);e&&e.dataset.smModalTrigger===this.wrapper.dataset.smModalId&&(this.trigger=e,this.open(!0))},i=function(t){-1!==this.opts.closeMethods.indexOf("escape")&&27===t.which&&this.close(),this.opts.focusWithin&&this.isOpen&&"Tab"===t.key&&(t.shiftKey&&document.activeElement===this.firstFocusElement?(this.lastFocusElement.focus(),t.preventDefault()):t.shiftKey||document.activeElement!==this.lastFocusElement||(this.firstFocusElement.focus(),t.preventDefault()))},n=function(t){this.canOpen&&(t.toElement||t.relatedTarget||t.clientY>10||this.open())},l=function(){[...this.focusableElements].forEach((t,e)=>{t.setAttribute("tabindex",this.isOpen?"0":"-1"),0===e&&this.isOpen&&t.focus()}),this.trigger&&!this.isOpen&&this.trigger.focus()},a=function(){const{storage:t,storageExpirationDays:e}=this.opts;if("none"!==t){if("load"!==t){const s=new Date;s.setDate(s.getDate()+e),window["session"===t?"sessionStorage":"localStorage"].setItem(this.storageKey,s)}this.canOpen=!1}else this.canOpen=!0},r=function(){c.call(this,"close"),document.body.classList.remove("s-modal--open"),this.wrapper.style.display="none",this.opts.disableScroll&&document.documentElement.classList.remove("noscroll"),this.isOpen=!1,l.call(this),"close"===this.opts.storageType&&a.call(this)},c=function(t){if(this._callbackEvents.hasOwnProperty(t))for(let e=0;e<this._callbackEvents[t].length;e++){const s=this._callbackEvents[t][e];let o,i=Array.from(arguments);if(i.length>1?(i.shift(),o=s.call(this,...i)):o=s.call(this),!1===o)return!1}return!0},h=function(t){switch(t){case"id":return void console.warn("SiteManager Modal: No ID has been set.");case"dom":return void console.warn("SiteManager Modal: No modal elements found.");case"generic":return void console.warn("SiteManager Modal: An error has occured.")}};function d(t){this.opts=Object.assign({},{wrapperId:"s-cookie__modal",id:!1,modalSelector:"[data-sm-modal]",modalHeaderSelector:"[data-sm-modal-header]",modalContentSelector:"[data-sm-modal-content]",modalOverlaySelector:"[data-sm-modal-overlay]",modalCloseSelector:"[data-sm-modal-close]",modalTriggerSelector:"[data-sm-modal-trigger]",designMode:!1,dynamicClose:!1,focusWithin:!0,disableScroll:!1,awaitCloseAnimation:!1,enablePlaceholder:!0,closeMethods:["button","overlay","escape"],showOnLoad:!1,delay:1e3,showOnScroll:!1,scrollPosition:0,scrollDirection:"top",exitIntent:!1,exitIntentDelay:1e4,storage:"none",storageExpirationDays:30,storageType:"open"},t),this.isOpen=!1,this.trigger=!1,this.canOpen=!0,this._callbackEvents={open:[],close:[]},this.init()}d.prototype.init=function(){(function(){if(this.opts.id){if(this.nodes=document.querySelectorAll(this.opts.modalSelector),this.modal=[...this.nodes].find(t=>t.dataset.smModal===this.opts.id),!this.modal)return void h.call(this,"dom");this.overlay=this.modal.querySelector(this.opts.modalOverlaySelector),this.wrapper=this.modal}else{if(this.wrapper=document.getElementById(this.opts.wrapperId),!this.wrapper)return void h.call(this,"id");this.modal=this.wrapper.querySelector(this.opts.modalSelector)||null,this.overlay=this.wrapper}this.modalHeader=this.wrapper.querySelector(this.opts.modalHeaderSelector)||null,this.modalContent=this.wrapper.querySelector(this.opts.modalContentSelector)||null,this.focusableElements=this.wrapper.querySelectorAll(["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])']),this.firstFocusElement=this.focusableElements[0],this.lastFocusElement=this.focusableElements[this.focusableElements.length-1]||null}).call(this),function(){const t=window.location.hostname;t.includes("cloud.sitemn.gr")?this._env="platform":t.includes("sitemn.gr")?this._env="preview":this._env="live"}.call(this),this.wrapper.SM_Modal=this,this.storageKey=`sm-modal-${this.opts.id}`,this.canOpen=function(){const{storage:t,storageExpirationDays:e}=this.opts;if("none"===t||"load"===t)return!0;const s=window["session"===t?"sessionStorage":"localStorage"].getItem(this.storageKey);if(s&&""!==s){if("session"===t||!e)return!1;if(new Date<=new Date(s))return!1}return!0}.call(this),t.call(this),function(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:s.bind(this),clickDownOverlay:e.bind(this),clickTrigger:o.bind(this),keyPress:i.bind(this),exitIntent:n.bind(this)},-1!==this.opts.closeMethods.indexOf("button")&&[...this.modalCloseBtns].forEach(t=>{t.addEventListener("click",this._events.clickCloseBtn)}),this.opts.exitIntent&&this.canOpen&&setTimeout(()=>document.addEventListener("mouseout",this._events.exitIntent),this.opts.exitIntentDelay),this.overlay.addEventListener("mousedown",this._events.clickDownOverlay),this.overlay.addEventListener("touchstart",this._events.clickDownOverlay),this.overlay.addEventListener("mouseup",this._events.clickOverlay),this.overlay.addEventListener("touchend",this._events.clickOverlay),document.addEventListener("keydown",this._events.keyPress),document.addEventListener("click",this._events.clickTrigger)}.call(this),this.opts.focusWithin&&l.call(this),this.opts.designMode&&"platform"===this._env?this.open():this.opts.showOnLoad&&"platform"!==this._env&&this.canOpen&&function(t){setTimeout(this.open.bind(this),t)}.call(this,this.opts.delay)},d.prototype.on=function(t,e){switch(t){case"open":this._callbackEvents.open.push(e);break;case"close":this._callbackEvents.close.push(e);break;default:console.log(`Event '${t}' does not exist`)}},d.prototype.open=function(t=!1){c.call(this,"open"),document.body.classList.add("s-modal--open"),this.wrapper.style.display="flex",this.wrapper.setAttribute("aria-hidden",!1),this.opts.disableScroll&&document.documentElement.classList.add("noscroll"),t||(this.trigger=!1),this.isOpen=!0,l.call(this),"open"===this.opts.storageType&&a.call(this)},d.prototype.close=function(){this.wrapper.setAttribute("aria-hidden",!0),this.opts.awaitCloseAnimation?this.wrapper.addEventListener("animationend",()=>{r.call(this)},{once:!0}):r.call(this)},window.SM_Modal=d})();